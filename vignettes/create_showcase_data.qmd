---
title: "create_showcase_data"
author: "Karim"
format: html
---

## Render readme

```{r}
# pak::pak(c("any::rmarkdown", "any::usethis", "."))
# writeLines(
#   knitr::knit_expand(
#     "README.Rmd",
#     packagename = read.dcf("DESCRIPTION", "Package"),
#     gh_repo = usethis:::github_remote_list()$repo_spec
#   ),
#   "README_expanded.Rmd"
# )
# rmarkdown::render(
#   "README_expanded.Rmd",
#   output_file = "README.md",
#   output_dir = "."
# )
# unlink("README_expanded.Rmd")
```

## Test data creation process

### data import

```{r}
# data import
data <- readRDS(system.file("extdata", "test_df.RDS", package = "cleanepi"))
head(data)
```

### scanning through the data

```{r}
# scanning through the data
scan_result <- cleanepi::scan_data(data = data)
print(scan_result)
saveRDS(
  scan_result,
  file = file.path(dirname(getwd()), "inst", "extdata", "scan_result.RDS")
)
```

### replace missing values with NA

```{r}
# replace missing values with NA
cleaned_data <- cleanepi::replace_missing_values(
  data = data,
  na_strings = "-99"
)
saveRDS(
  cleaned_data,
  file = file.path(dirname(getwd()), "inst", "extdata", "use_na_result.RDS")
)
```

### column names standardisation

```{r}
# KEEP 'date.of.admission' AS IS
test_data <- cleanepi::standardize_column_names(
  data = data,
  keep = "date.of.admission"
)
print(colnames(test_data))

# KEEP 'date.of.admission' AS IS, BUT RENAME 'dateOfBirth' AND 'sex' TO
# 'DOB' AND 'gender' RESPECTIVELY
test_data <- cleanepi::standardize_column_names(
  data = data,
  keep = "date.of.admission",
  rename = c(DOB = "dateOfBirth", gender = "sex")
)
print(colnames(test_data))

# default column names standardisation
cleaned_data <- cleanepi::standardize_column_names(
  data = cleaned_data
)
saveRDS(
  cleaned_data,
  file = file.path(dirname(getwd()), "inst", "extdata", "col_names_standardised.RDS")
)
```
